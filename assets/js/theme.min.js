function search (e) { const t = new URL(location.href).searchParams.get('q'); new URL(location.href).searchParams.get('lang') || ui.lang; $("input[name='q']").val(t); const n = []; let s = new RegExp(); try { s = new RegExp(t, 'im') ;}catch (e) { return $('.search-results .content').empty(), $('.search-results .summary').html(ui.i18n.search_results_not_found), $('.search-results h2').html(ui.i18n.search_results), debug(e.message) ;} function a (e, t, n) { return e.slice(t, n).replace(s, e=>`<span class="bg-yellow">${e}</span>`) ;}for (page of e) { let [e, l] = [null, null]; try { page.title ? e = page.title.match(s):'/' == page.url ? page.title = ui.title:page.title = page.url ;}catch (e) { debug(e.message) ;}try { page.content && (page.content = $('<div/>').html(page.content).text(), l = page.content.match(s)) ;}catch (e) { debug(e.message) ;}if (e || l) { const e = [`<a href="${ui.baseurl}${page.url}?highlight=${t}">${page.title}</a>`]; if (l) { let [t, n] = [l.index - 100, l.index + 100]; let  [s, i] = ['...', '...']; t < 0 && (s = '', t = 0), n > page.content.length && (i = '', n = page.content.length), e.push(`<p class="text-gray">${s}${a(page.content, t, n)}${i}</p>`) ;}n.push(`<li class="border-top py-4">${e.join('')}</li>`) ;} }n.length > 0 && t.length > 0 ? ($('.search-results .content').html(n.join('')), $('.search-results .summary').html(ui.i18n.search_results_found.replace('#', n.length))):($('.search-results .content').empty(), $('.search-results .summary').html(ui.i18n.search_results_not_found)), $('.search-results h2').html(ui.i18n.search_results) ;} function initialize (e) { const t = $('.toctree').find(`[href="${decodeURI(e)}"]`); if (t.length > 0) { $('.toctree .current').removeClass('current'), t.addClass('current'), t.closest('.level-1').parent().addClass('current'); for (let e = 1; e <= 11; e++)t.closest(`.level-${e}`).addClass('current') ;} } function toggleCurrent (e) { const t = e.closest('li'); t.siblings('li.current').removeClass('current'), t.siblings().find('li.current').removeClass('current'), t.find('> ul li.current').removeClass('current'), t.toggleClass('current') ;} function toc () { $('.toctree li.current').append('<ul class="content-toc"></ul>').html(function(){const e=parseInt(this.dataset.level);let t=0;const n=[$(this).find(".content-toc")];$(".markdown-body").find("h2,h3,h4,h5,h6").each((function(){const s=$("<a/>").addClass("d-flex flex-items-baseline").text($(this).text()).attr("href",`#${this.id}`),a=parseInt(this.tagName.slice(1))-1;if(a>t){const e=n[0].children("li:last")[0];e&&n.unshift($("<ul/>").appendTo(e))}else n.splice(0,Math.min(t-a,Math.max(n.length-1,0)));t=a,$("<li/>").addClass(`toc level-${e+a}`).append(s).appendTo(n[0])})),n[0].html()||n[0].remove()}) ;} function set (e, t) { return localStorage.setItem(e, t) ;} function get (e) { return localStorage.getItem(e) || !1 ;} function debug () { console.debug.apply(console, arguments) ;} function restore () { const e = get('scroll'); const t=get("scrollTime"); const  n = get('scrollHost'); e && t && n && n == location.host && Date.now() - t < 6e5 && $('.sidebar').scrollTop(e), $('.sidebar').scroll(function(){set("scroll",this.scrollTop),set("scrollTime",Date.now()),set("scrollHost",location.host)}) ;} function highlight () { const e = new URL(location.href).searchParams.get('highlight'); if (e) { $('.markdown-body').find('*').each(function(){try{this.outerHTML.match(new RegExp(e,"im"))&&($(this).addClass("search-result"),$(this).parentsUntil(".markdown-body").removeClass("search-result"))}catch(e){debug(e.message)}}); let t = e.replace(/\\/g, ''); $('.search-result').each(function(){$(this).html((function(n,s){return s.replace(new RegExp(e,"im"),`<span class="bg-yellow">${t}</span>`)}))}), $('.search input').val(e) ;} }$(window).bind('hashchange', ()=>initialize(location.hash||location.pathname)), $(document).on('scroll', function(){const e=$(this).scrollTop()+5,t=[];$(".markdown-body").find("h1,h2,h3,h4,h5,h6").each((function(){t.push({offset:$(this).offset().top,id:this.id,level:parseInt(this.tagName.slice(1))})}));for(let n=0;n<t.length;n++)e>t[n].offset&&(n<t.length-1?e<t[n+1].offset&&(1==t[n].level?initialize(location.pathname):initialize("#"+t[n].id)):initialize("#"+t[n].id))}), $('#toggle').click(function(){$(".sidebar-wrap,.content-wrap,.addons-wrap").toggleClass("shift")}), $('.status').click(function(){$(".addons").toggleClass("d-none")}), location.pathname == `${ui.baseurl}/search.html` && $.ajax(`${ui.baseurl}/data.json`).done(search).fail((e,t)=>debug(t)), toc(), initialize(location.pathname), initialize(location.hash), restore(), highlight(), $('.toc ul').siblings('a').each(function(){const e=$(this),t=$('<i class="fa fa-plus-square-o"></i>');t.on("click",(function(t){return t.stopPropagation(),toggleCurrent(e),!1})),e.prepend(t)}), $('.markdown-body :header').append(function(){return`<a href="#${this.id}" class="anchor"><i class="octicon-link fa fa-link text-blue"></i></a>`}), $('div.highlighter-rouge').each(function(){const e=$(this).attr("class").match(/language-(\w+)/);e&&$(this).attr("data-lang",e[1])}), 'serviceWorker' in navigator ? navigator.serviceWorker.register(`${ui.baseurl}/sw.caches.js`):debug('Service Worker not supported!');
